# üéâ –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ Telegraf –Ω–∞ TypeScript - –ó–∞–≤–µ—Ä—à–µ–Ω–æ

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ TypeScript. –° —Ç–µ—Ö –ø–æ—Ä –ø—Ä–æ–µ–∫—Ç –±—ã–ª –æ–±–Ω–æ–≤–ª–µ–Ω –∏ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ **[grammY](https://grammy.dev/)** –≤–º–µ—Å—Ç–æ Telegraf. –ú–Ω–æ–≥–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –æ—Å—Ç–∞–ª–∏—Å—å –ø—Ä–µ–∂–Ω–∏–º–∏, –Ω–æ –±–∞–∑–æ–≤—ã–π API –∏–∑–º–µ–Ω–∏–ª—Å—è.

---

## üìã –†–µ–∑—é–º–µ –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã

–í–µ—Å—å –ø—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å JavaScript (`.mjs`, `.js`) –Ω–∞ TypeScript (`.ts`).

### ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

#### 1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ TypeScript –æ–∫—Ä—É–∂–µ–Ω–∏—è** ‚öôÔ∏è

- ‚úì –°–æ–∑–¥–∞–Ω `tsconfig.json` —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- ‚úì –û–±–Ω–æ–≤–ª–µ–Ω `package.json` —Å –Ω–æ–≤—ã–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏:
  - `npm run build` - –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å TypeScript
  - `npm start` - —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
  - `npm run dev` - —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å ts-node
- ‚úì –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `typescript`, `ts-node`, `@types/node`

#### 2. **–ü–µ—Ä–µ–ø–∏—Å–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã** üìÑ

| –§–∞–π–ª                     | –¢–∏–ø       | –û–ø–∏—Å–∞–Ω–∏–µ                       |
| ------------------------ | --------- | ------------------------------ |
| `config.ts`              | Interface | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π      |
| `index.ts`               | Main      | –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π      |
| `core/Client.ts`         | Class     | –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –±–æ—Ç–∞            |
| `core/commandHandler.ts` | Class     | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–∞–º–∏ —Å —Ç–∏–ø–∞–º–∏  |
| `core/eventHandler.ts`   | Class     | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏           |
| `core/sceneHandler.ts`   | Class     | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞–º–∏             |
| `core/menuHandler.ts`    | Class     | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ |

#### 3. **–ü–µ—Ä–µ–ø–∏—Å–∞–Ω—ã –±–∞–∑–æ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** üèóÔ∏è

| –§–∞–π–ª                    | –¢–∏–ø            | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å               |
| ----------------------- | -------------- | ------------------------- |
| `structures/Command.ts` | Abstract Class | –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –∫–æ–º–∞–Ω–¥  |
| `structures/Event.ts`   | Abstract Class | –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Å–æ–±—ã—Ç–∏–π |
| `structures/util.ts`    | Functions      | –£—Ç–∏–ª–∏—Ç—ã —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π      |

#### 4. **–ü–µ—Ä–µ–ø–∏—Å–∞–Ω—ã –∫–æ–º–∞–Ω–¥—ã** üéÆ

- ‚úì `commands/fun/ping.ts` - –ø—Ä–æ—Å—Ç–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
- ‚úì `commands/admin/whoami.ts` - –∫–æ–º–∞–Ω–¥–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤
- ‚úì `commands/General/myid.ts` - –∫–æ–º–∞–Ω–¥–∞ —Å optional chaining
- ‚úì `commands/admin/reboot.ts` - –∫–æ–º–∞–Ω–¥–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

#### 5. **–ü–µ—Ä–µ–ø–∏—Å–∞–Ω—ã —Å–æ–±—ã—Ç–∏—è** üì¢

- ‚úì `events/message.ts` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úì `events/edited_message.ts` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### 6. **–ö–æ–º–ø–∏–ª—è—Ü–∏—è** ‚ú®

- ‚úì –í—Å–µ –æ—à–∏–±–∫–∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úì –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è: `npm run build`
- ‚úì –ö–æ–¥ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –≤ –ø–∞–ø–∫—É `dist/`

---

## üîë –ö–ª—é—á–µ–≤—ã–µ TypeScript –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏

### 1Ô∏è‚É£ **–¢–∏–ø–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π**

```typescript
const userId: number = 123;
async function initialize(): Promise<void> {}
```

### 2Ô∏è‚É£ **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (Interface)**

```typescript
interface BotConfig {
  owner: number | null;
  admins: number[];
}
```

### 3Ô∏è‚É£ **–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã**

```typescript
abstract class Command {
  abstract execute(ctx: Context): Promise<void>;
}
```

### 4Ô∏è‚É£ **Union —Ç–∏–ø—ã**

```typescript
owner: number | null;
status: "active" | "inactive" | "pending";
```

### 5Ô∏è‚É£ **Optional chaining**

```typescript
const id = ctx.from?.id; // –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø
```

### 6Ô∏è‚É£ **Generics**

```typescript
function chunkArray<T>(array: T[]): T[][] {}
Map<string, Command>;
```

### 7Ô∏è‚É£ **Type assertion**

```typescript
const data = response as { id: string };
```

### 8Ô∏è‚É£ **Access modifiers**

```typescript
private client: BotClient;
protected name: string;
public utils: typeof utils;
```

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
dist/                          ‚Üê –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript
‚îú‚îÄ‚îÄ index.js
‚îú‚îÄ‚îÄ config.js
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ Client.js
‚îÇ   ‚îú‚îÄ‚îÄ commandHandler.js
‚îÇ   ‚îú‚îÄ‚îÄ eventHandler.js
‚îÇ   ‚îú‚îÄ‚îÄ sceneHandler.js
‚îÇ   ‚îî‚îÄ‚îÄ menuHandler.js
‚îú‚îÄ‚îÄ structures/
‚îÇ   ‚îú‚îÄ‚îÄ Command.js
‚îÇ   ‚îú‚îÄ‚îÄ Event.js
‚îÇ   ‚îî‚îÄ‚îÄ util.js
‚îú‚îÄ‚îÄ commands/
‚îú‚îÄ‚îÄ events/
‚îî‚îÄ‚îÄ models/

–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ TypeScript:
‚îú‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ config.ts
‚îú‚îÄ‚îÄ core/*.ts
‚îú‚îÄ‚îÄ structures/*.ts
‚îú‚îÄ‚îÄ commands/**/*.ts
‚îú‚îÄ‚îÄ events/*.ts
‚îî‚îÄ‚îÄ models/*.ts
```

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (—Å live reload)

```bash
npm run dev
```

### –ü—Ä–æ–¥–∞–∫—à–Ω

```bash
npm run build  # –ö–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å TypeScript
npm start      # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ TypeScript –≤ –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ [TYPESCRIPT_GUIDE.md](TYPESCRIPT_GUIDE.md).

–¢–∞–º –æ–ø–∏—Å–∞–Ω—ã:

- –ß—Ç–æ —Ç–∞–∫–æ–µ TypeScript –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω
- –í—Å–µ –∫–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –∫–ª–∞—Å—Å—ã, —Ç–∏–ø—ã
- –ü—Ä–∏–º–µ—Ä—ã –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É –æ–±—É—á–µ–Ω–∏—é

---

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ TypeScript –≤–µ—Ä—Å–∏–∏

| –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ                     | –û–ø–∏—Å–∞–Ω–∏–µ                                                   |
| -------------------------------- | ---------------------------------------------------------- |
| üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤**        | –û—à–∏–±–∫–∏ –≤—ã—è–≤–ª—è—é—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –Ω–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ    |
| üéØ **–¢–æ—á–Ω–æ–µ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ**     | IDE –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏ —Å–≤–æ–π—Å—Ç–≤–∞           |
| üìñ **–°–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**     | –¢–∏–ø—ã –æ–ø–∏—Å—ã–≤–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –ª—É—á—à–µ, —á–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏     |
| üîß **–õ–µ–≥—á–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å**         | –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–∏–ø–æ–≤ IDE —Å—Ä–∞–∑—É –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Å—Ç–∞ |
| üë∑ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç** | TypeScript –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ 80% –∫—Ä—É–ø–Ω—ã—Ö JavaScript –ø—Ä–æ–µ–∫—Ç–æ–≤  |

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞

1. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Å—Ü–µ–Ω**
   - ‚úì **–ì–æ—Ç–æ–≤–æ!** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `SessionContext` –∏ `wizard` –≤ `types/index.ts`.
   - –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ü–µ–Ω

2. **–¢–∏–ø–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π**
   - ‚úì **–ì–æ—Ç–æ–≤–æ!** –ú–æ–¥–µ–ª–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã.
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Sequelize —Ç–∏–ø—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–≥–æ–≥–æ —Ä–µ–∂–∏–º–∞**
   - ‚úì **–ì–æ—Ç–æ–≤–æ!** –û–ø—Ü–∏–∏ `strict` –≤–∫–ª—é—á–µ–Ω—ã –≤ `tsconfig.json`.
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è `any` —Ç–∏–ø—ã

4. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –∏–∑ API**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –∏–∑ Telegram API
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ —Ç–∏–ø—ã `@telegraf/types`

5. **Unit —Ç–µ—Å—Ç—ã**
   - –î–æ–±–∞–≤–∏—Ç—å Jest —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π TypeScript
   - –ü–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –∫–æ–º–∞–Ω–¥ –∏ —É—Ç–∏–ª–∏—Ç

---

## üìû –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –±—É–¥—É—â–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:

- ‚úÖ –¢–∏–ø–∏–∑–∏—Ä—É–π—Ç–µ –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –£–∫–∞–∑—ã–≤–∞–π—Ç–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø (`Promise<void>`, `string`, –∏ —Ç.–¥.)
- ‚úÖ –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `abstract` –∫–ª–∞—Å—Å—ã –∫–∞–∫ –±–∞–∑—ã
- ‚úÖ –ò–∑–±–µ–≥–∞–π—Ç–µ `any` —Ç–∏–ø–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ `npm run build` –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

---

## üéì –ü–æ–ª–µ–∑–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

- [TypeScript Official Handbook](https://www.typescriptlang.org/docs/)
- [TypeScript Deep Dive (—Ä—É—Å—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥)](https://basarat.gitbook.io/typescript/)
- [Telegraf TypeScript Support](https://telegraf.js.org/#/?id=typescript-support)
- [TypeScript Config Reference](https://www.typescriptlang.org/tsconfig)

---

### –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ TypeScript! üéâ

–í–µ—Å—å –∫–æ–¥ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω, —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.
